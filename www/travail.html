<!DOCTYPE html>
<html lang="en">

<head>
  <title>Grégory Desjardins</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <link rel="stylesheet" href="css/bootstrap.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&family=Nunito&family=Sacramento&display=swap"
    rel="stylesheet">

</head>

<body class="">

  <section id="top">

    <header id="home-top" class="nav-top nav-fixed nav-root">

      <div class="container">

        <div class="row">

          <div class="col-md-4 col-xs-4">

            <div id="header-logo" class="image-text">

              <a href="#">
                <span class="mask"></span>
                <span class="behind"></span>
                Grégory Desjardins
                <i class=""></i>
              </a>

            </div>

          </div>

          <div class="col-md-8 col-xs-8">

            <nav id="top-nav">

              <ul class="nav-list transistion">
                <li><a class="active" href="index.html">À propos</a></li>
                <li><a href="travail.html">Travail</a></li>
                <li><a href="notes.html">Notes</a></li>
                <button id="lang-toggle" class="lang-btn" aria-label="Switch language"
                  style="background:none;border:none;cursor:pointer;">
                  <img id="lang-flag" src="images/EN_Flag.svg" alt="Switch language" width="32" height="20">
                </button>
              </ul>
            </nav>

          </div> <!-- 12 -->

        </div> <!-- / row -->

      </div> <!--/ container -->
    </header>

    <div class="masthead-wrap">

      <div id="title">

        <div class="container">

          <div class="transistion cloud left-cloud"></div>
          <div class="transistion cloud right-cloud"></div>

          <div class="row">

            <div class="col-md-12">


              <div id="head-slider" class="transistion">

                <div class="slide-contents">

                  <div class="slide">

                    <h1 class="im-greg">

                      Mon Travail.

                    </h1>

                    <p class="header-desc">des preuves!</p>

                  </div>


                </div>


              </div>


            </div> <!-- /col 24 -->

          </div> <!-- /row -->

        </div>

      </div>

    </div>
  </section>
  <footer>
    <p>Grégory Desjardins © Tout droits réservés / All rights reserved.</p>
  </footer>
  <script src="js/jquery-3.6.0.min.js"></script>
  <script>
    function getThemeFromCookie() {
      const cookies = document.cookie.split('; ');
      const themeCookie = cookies.find((row) => row.startsWith('theme='));
      return themeCookie ? themeCookie.split('=')[1] : null;
    }

    function applyThemeFromCookie() {
      const theme = getThemeFromCookie();

      if (theme === 'dark') {
        document.body.classList.add('dark-theme');
      } else {
        document.body.classList.remove('dark-theme');
      }
    }

    // Apply the theme on page load
    applyThemeFromCookie();
  </script>

  <!-- Language Toggle Script -->
  <script>
    let translations = {};
    let currentLang = getLangFromCookie() || 'fr';

    fetch('data/translations.json')
      .then(res => res.json())
      .then(data => {
        translations = data;
        applyTranslations();
        updateFlag();
        fetchAndRenderBlogs(currentLang);
      });

    function applyTranslations() {
      const t = translations['travail'][currentLang];
      const nav = translations['navbar'][currentLang];
      if (!t || !nav) return;

      // Navbar
      const navLinks = document.querySelectorAll('.nav-list li a');
      if (navLinks.length >= 3) {
        navLinks[0].textContent = nav.about;
        navLinks[1].textContent = nav.work;
        navLinks[2].textContent = nav.notes;
      }

      // Main content
      document.querySelector('.im-greg').textContent = t.title;
      document.querySelector('.header-desc').textContent = t.desc;

    }

    function updateFlag() {
      const flagImg = document.getElementById('lang-flag');
      if (currentLang === 'fr') {
        flagImg.src = 'images/EN_Flag.svg';
        flagImg.alt = 'Switch to English';
      } else {
        flagImg.src = 'images/Flag_FR.png';
        flagImg.alt = 'Passer en français';
      }
    }

    document.getElementById('lang-toggle').addEventListener('click', () => {
      currentLang = currentLang === 'fr' ? 'en' : 'fr';
      setLangCookie(currentLang);
      applyTranslations();
      updateFlag();
      resetBlogView();
      fetchAndRenderBlogs(currentLang);
    });

    function setLangCookie(lang) {
      document.cookie = `lang=${lang}; path=/; max-age=31536000`;
    }
    function getLangFromCookie() {
      const cookies = document.cookie.split('; ');
      const langCookie = cookies.find(row => row.startsWith('lang='));
      return langCookie ? langCookie.split('=')[1] : null;
    }
  </script>
</body>

</html>